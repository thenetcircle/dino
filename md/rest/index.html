<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>REST API - Dino</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "REST API";
    var mkdocs_page_input_path = "md/rest.md";
    var mkdocs_page_url = "/md/rest/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Dino</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../installation/">Installation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../getting_started/">Getting Started</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../usage/">Usage</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../api/">API</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../web/">Web UI API</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../events/">Events</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../external_events/">External Events</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../acl/">ACL</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">REST API</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#get-acl">GET /acl</a></li>
    

    <li class="toctree-l2"><a href="#post-acl">POST /acl</a></li>
    

    <li class="toctree-l2"><a href="#get-history">GET /history</a></li>
    

    <li class="toctree-l2"><a href="#post-heartbeat">POST /heartbeat</a></li>
    

    <li class="toctree-l2"><a href="#post-full-history">POST /full-history</a></li>
    

    <li class="toctree-l2"><a href="#post-broadcast">POST /broadcast</a></li>
    

    <li class="toctree-l2"><a href="#post-blacklist">POST /blacklist</a></li>
    

    <li class="toctree-l2"><a href="#delete-blacklist">DELETE /blacklist</a></li>
    

    <li class="toctree-l2"><a href="#post-set-admin">POST /set-admin</a></li>
    

    <li class="toctree-l2"><a href="#post-remove-admin">POST /remove-admin</a></li>
    

    <li class="toctree-l2"><a href="#post-ban">POST /ban</a></li>
    

    <li class="toctree-l2"><a href="#post-kick">POST /kick</a></li>
    

    <li class="toctree-l2"><a href="#get-roles">GET /roles</a></li>
    

    <li class="toctree-l2"><a href="#get-rooms-for-users">GET /rooms-for-users</a></li>
    

    <li class="toctree-l2"><a href="#post-delete-messages">POST /delete-messages</a></li>
    

    <li class="toctree-l2"><a href="#get-banned">GET /banned</a></li>
    

    <li class="toctree-l2"><a href="#post-status">POST /status</a></li>
    

    <li class="toctree-l2"><a href="#post-send">POST /send</a></li>
    

    <li class="toctree-l2"><a href="#user-id-parameter">User ID parameter</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../wio/">Who Is Online?</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../storage/">Storage</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Dino</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>REST API</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="get-acl">GET /acl</h2>
<p>Retrieve all ACLs for all non-temporary rooms in all channels.</p>
<p>Example response:</p>
<pre><code class="json">{
    &quot;data&quot;: {
        &quot;status&quot;: &quot;OK&quot;,
        &quot;data&quot;: {
            &quot;0efd8a52-7220-4160-88fe-68a15d470d95&quot;: [{
                &quot;type&quot;: &quot;admin&quot;,
                &quot;action&quot;: &quot;join&quot;,
                &quot;value&quot;: &quot;&quot;
            }, {
                &quot;type&quot;: &quot;admin&quot;,
                &quot;action&quot;: &quot;list&quot;,
                &quot;value&quot;: &quot;&quot;
            }],
            &quot;a81e4726-784a-11e9-bbdd-bbfdfd886868&quot;: [{
                &quot;type&quot;: &quot;gender&quot;,
                &quot;action&quot;: &quot;autojoin&quot;,
                &quot;value&quot;: &quot;m,f&quot;
            }]
        }
    },
    &quot;status_code&quot;: 200
}
</code></pre>

<h2 id="post-acl">POST /acl</h2>
<p>Request:</p>
<pre><code class="json">{
    &quot;room_id&quot;: &quot;a81e4726-784a-11e9-bbdd-bbfdfd886868&quot;,
    &quot;action&quot;: &quot;autojoin&quot;,
    &quot;acl_type&quot;: &quot;gender&quot;,
    &quot;acl_value&quot;: &quot;age=35,(gender=f|membership=normal)&quot;
}
</code></pre>

<p>For more examples on the format of the <code>acl_value</code> field, see the <a href="../acl/">ACL</a> section. </p>
<p>Response:</p>
<pre><code class="json">{
    &quot;data&quot;: {
        &quot;status&quot;: &quot;OK&quot;
    }, 
    &quot;status_code&quot;: 200
}
</code></pre>

<h2 id="get-history">GET /history</h2>
<p>Request contains info on what time slice, target, origin to get history for:</p>
<pre><code class="json">    {
        &quot;from_time&quot;: &quot;2016-12-26T08:39:54Z&quot;,
        &quot;to_time&quot;: &quot;2016-12-28T08:39:54Z&quot;,
        &quot;user_id&quot;: &quot;124352&quot;,
        &quot;room_id&quot;: &quot;dedf878e-b25d-4713-8058-20c6f0547c59&quot; # optional
    }
</code></pre>

<p>Response would be something similar to the following:</p>
<pre><code class="json">    {
        &quot;status_code&quot;: 200,
        &quot;data&quot;: [{
            &quot;deleted&quot;: false,
            &quot;target_name&quot;: &quot;YmFkIGtpZHo=&quot;,
            &quot;target_id&quot;: &quot;675eb2a5-17c6-45e4-bc0f-674241573f22&quot;,
            &quot;timestamp&quot;: &quot;2017-01-26T04:58:33Z&quot;,
            &quot;from_user_name&quot;: &quot;YmF0bWFu&quot;,
            &quot;message_id&quot;: &quot;37db81f2-4e16-4076-b759-8ce1c23a364e&quot;,
            &quot;from_user_id&quot;: &quot;997110&quot;,
            &quot;channel_name&quot;: &quot;U2hhbmdoYWk=&quot;,
            &quot;body&quot;: &quot;aG93IGFyZSB5b3U/&quot;,
            &quot;domain&quot;: &quot;room&quot;,
            &quot;channel_id&quot;: &quot;dedf878e-b25d-4713-8058-20c6f0547c59&quot;
        }, {
            &quot;deleted&quot;: false,
            &quot;target_name&quot;: &quot;YmFkIGtpZHo=&quot;,
            &quot;target_id&quot;: &quot;675eb2a5-17c6-45e4-bc0f-674241573f22&quot;,
            &quot;timestamp&quot;: &quot;2017-01-26T04:58:31Z&quot;,
            &quot;from_user_name&quot;: &quot;YmF0bWFu&quot;,
            &quot;message_id&quot;: &quot;416d3c60-7197-471c-a706-7dbeca090d11&quot;,
            &quot;from_user_id&quot;: &quot;997110&quot;,
            &quot;channel_name&quot;: &quot;U2hhbmdoYWk=&quot;,
            &quot;body&quot;: &quot;aGVsbG8gdGhlcmU=&quot;,
            &quot;domain&quot;: &quot;room&quot;,
            &quot;channel_id&quot;: &quot;dedf878e-b25d-4713-8058-20c6f0547c59&quot;
        }, {
            &quot;deleted&quot;: false,
            &quot;target_name&quot;: &quot;YmFkIGtpZHo=&quot;,
            &quot;target_id&quot;: &quot;675eb2a5-17c6-45e4-bc0f-674241573f22&quot;,
            &quot;timestamp&quot;: &quot;2017-01-26T04:58:16Z&quot;,
            &quot;from_user_name&quot;: &quot;YmF0bWFu&quot;,
            &quot;message_id&quot;: &quot;91655457-3712-4c2f-b6f2-c3b0f8be29e5&quot;,
            &quot;from_user_id&quot;: &quot;997110&quot;,
            &quot;channel_name&quot;: &quot;U2hhbmdoYWk=&quot;,
            &quot;body&quot;: &quot;ZmRzYQ==&quot;,
            &quot;domain&quot;: &quot;room&quot;,
            &quot;channel_id&quot;: &quot;dedf878e-b25d-4713-8058-20c6f0547c59&quot;
        }]
    }
</code></pre>

<ul>
<li>If neither <code>from_time</code> nor <code>to_time</code> is specified, the last 7 days will be used as limit,</li>
<li>If <code>from_time</code> is specified but no <code>to_time</code>, <code>to_time</code> will be <code>from_time + 7 days</code>,</li>
<li>If <code>to_time</code> is specified but no <code>from_time</code>, <code>from_time</code> will be <code>to_time - 7 days</code>,</li>
<li>Either <code>user_id</code> or <code>room_id</code> is required (both can be specified at the same time),</li>
<li><code>to_time</code> needs to be after <code>from_time</code>.</li>
</ul>
<h2 id="post-heartbeat">POST /heartbeat</h2>
<p>For mobile clients, it is sometimes tricky to maintain a constant connection due to fluctuations in network quality 
and data loss. To keep a user in an online state without keeping a connection open, the <code>/heartbeat</code> api can be used
instead.</p>
<p>With regular <code>/heartbeat</code> calls, a user will not be marked as offline until no more heartbeats are being received.</p>
<p>Multiple user IDs can be batched together into a single <code>/heartbeat</code> call.</p>
<p>Request:</p>
<pre><code class="json">[
    &quot;&lt;user ID 1&gt;&quot;,
    &quot;&lt;user ID 2&gt;&quot;,
    &quot;&lt;user ID n&gt;&quot;
]
</code></pre>

<p>Response:</p>
<pre><code class="json">{
    &quot;data&quot;: {
        &quot;status&quot;: &quot;OK&quot;
    }, 
    &quot;status_code&quot;: 200
}
</code></pre>

<h2 id="post-full-history">POST /full-history</h2>
<p>To get all messages sent by a user, call this endpoint with the following data:</p>
<pre><code class="json">{
    &quot;user_id&quot;: 1971
    &quot;from_time&quot;: &quot;2016-12-26T08:39:54Z&quot;, # optional (other needed if this one is specified)
    &quot;to_time&quot;: &quot;2016-12-28T08:39:54Z&quot; # optional  (other needed if this one is specified)
}
</code></pre>

<p>Response looks like this:</p>
<pre><code class="json">{
    &quot;status_code&quot;: 200,
    &quot;data&quot;: [{
        &quot;message_id&quot;: &quot;07bacdd8-42e6-4ace-acee-8d200dd14bfc&quot;,
        &quot;from_user_id&quot;: &quot;1971&quot;,
        &quot;from_user_name&quot;: &quot;Um9k=&quot;,
        &quot;target_id&quot;: &quot;7935a673-da64-4419-818b-e6e0d1864b61&quot;,
        &quot;target_name&quot;: &quot;TG9iYnk=&quot;,
        &quot;body&quot;: &quot;eyJtYXNrIjoiMDAiLCJ6IjE2IiwidGV4dCI6ImkgYW0gaW52aXNpYmxlIn0=&quot;,
        &quot;domain&quot;: &quot;room&quot;,
        &quot;channel_id&quot;: &quot;84ec4b4f-7482-48ba-83a1-9c9b1c470903&quot;,
        &quot;channel_name&quot;: &quot;UGVu&quot;,
        &quot;timestamp&quot;: &quot;2017-05-23T07:32:07Z&quot;,
        &quot;deleted&quot;: true
    }, {...}]
}
</code></pre>

<h2 id="post-broadcast">POST /broadcast</h2>
<p>Broadcasts a message to everyone on the server. Request needs the <code>body</code> and <code>verb</code> keys:</p>
<pre><code>{
    "body": "aGkgdGhlcmU=",
    "verb": "broadcast"
}
</code></pre>
<p>Body needs to be in base64. The verb may be anything, it's up to clients to handle it.</p>
<h2 id="post-blacklist">POST /blacklist</h2>
<p>Add a new word to the blacklist. Encode the word in base64 first, then post a request on the following format:</p>
<pre><code>{
    "word": "YmFkd29yZA=="
}
</code></pre>
<p>Response if OK:</p>
<pre><code>{
    "status_code": 200
}
</code></pre>
<h2 id="delete-blacklist">DELETE /blacklist</h2>
<p>Remove a matching word from the blacklist. Encode the word in base64 first, then post a request on the following format:</p>
<pre><code>{
    "word": "YmFkd29yZA=="
}
</code></pre>
<p>The sent word will be compared lowercase to find  matching lowercased word in the blacklist and remove all words with
and exact match (when both lowercase).</p>
<p>Response if OK:</p>
<pre><code>{
    "status_code": 200
}
</code></pre>
<h2 id="post-set-admin">POST /set-admin</h2>
<p>Set a user as a global moderator.</p>
<p>Request contains user ID and the user's name (in case the user doesn't exist):</p>
<pre><code>{
    "id": "1234",
    "name": "myuser"
}
</code></pre>
<p>Response if OK:</p>
<pre><code>{
    "status_code": 200
}
</code></pre>
<p>Or if any errors:</p>
<pre><code>{
    "data": "no name parameter in request", 
    "status_code": 500
}
</code></pre>
<h2 id="post-remove-admin">POST /remove-admin</h2>
<p>Remove global moderator status for a user.</p>
<p>Request contains the user's ID only:</p>
<pre><code>{
    "id": "1234"
}
</code></pre>
<p>Response if OK:</p>
<pre><code>{
    "status_code": 200
}
</code></pre>
<p>Or if any errors:</p>
<pre><code>{
    "data": "no id parameter in request", 
    "status_code": 500
}
</code></pre>
<h2 id="post-ban">POST /ban</h2>
<p>Request contains info on who to ban where. For banning globally:</p>
<pre><code>{
    "1234": {
        "duration": "24h",
        "reason": "&lt;optional base64 encoded free-text&gt;",
        "admin_id": "&lt;id of user banning (must already exist), or leave empty for default&gt;",
        "type": "global",
        "name": "&lt;username in base64, optional&gt;"
    }
}
</code></pre>
<p>Can also ban multiple users at the same time:</p>
<pre><code>{
    "&lt;user id&gt;": {
        "duration": "24h",
        "type": "global",
        "reason": "&lt;option reason field, base64 encoded&gt;",
        "admin_id": "&lt;optional id of admin user who is banning&gt;",
        "name": "&lt;username in base64, optional&gt;"
    },
    "&lt;user id&gt;": {
        "duration": "10m",
        "target": "&lt;channel uuid&gt;",
        "type": "channel",
        "reason": "&lt;option reason field, base64 encoded&gt;",
        "admin_id": "&lt;optional id of admin user who is banning&gt;"
    },
    "&lt;user id&gt;": {
        "duration": "7d",
        "target": "&lt;room uuid&gt;",
        "type": "room",
        "reason": "&lt;option reason field, base64 encoded&gt;",
        "admin_id": "&lt;optional id of admin user who is banning&gt;"
    }
}
</code></pre>
<p>The <code>name</code> field must be base64 encoded. The field is also optional and is only used if a ban request is received for 
a user that doesn't exist on the server, e.g. if the user never logged in before it will not exist. If the name is 
not specified and the user has to be created before banning, the user ID will be set as the name (later when the user 
login the real username will overwrite this).</p>
<p>The <code>reason</code> field must be base64 encoded. If the <code>admin_id</code> field is specified it will be used, if not the default ID
<code>0</code> will be used (the default admin user).</p>
<p>Duration is an integer followed by a char for the unit, which can be one of <code>d</code>, <code>h</code>, <code>m</code>, <code>s</code> (days, hours, minutes, 
seconds). Negative or 0 durations are not allowed.</p>
<p>When type is set to <code>global</code>, no target is specified (meaning user is banned from the whole chat server).</p>
<p>Response will be something like the following (if failure):</p>
<pre><code>{
    "status": "FAIL",
    "message": "missing target id for user id &lt;user id&gt; and request &lt;the request json&gt;"
}
</code></pre>
<p>The banning is done async so if any of the provided user bans has invalid parameters the response will only tell you the
first non-valid parameter and for which user ID.</p>
<p>For success the response looks like this:</p>
<pre><code>{
    "status": "OK"
}
</code></pre>
<h2 id="post-kick">POST /kick</h2>
<p>Request contains:</p>
<pre><code>{
    "&lt;user id&gt;": {
        "target": "&lt;room uuid&gt;",
        "reason": "&lt;option reason field, base64 encoded&gt;",
        "admin_id": "&lt;optional id of admin user who is kicking&gt;"
    },
    "&lt;user id&gt;": {
        "target": "&lt;room uuid&gt;",
        "reason": "&lt;option reason field, base64 encoded&gt;",
        "admin_id": "&lt;optional id of admin user who is kicking&gt;"
    },
    "&lt;user id&gt;": {
        "target": "&lt;room uuid&gt;",
        "reason": "&lt;option reason field, base64 encoded&gt;",
        "admin_id": "&lt;optional id of admin user who is kicking&gt;"
    }
}
</code></pre>
<p>The "reason" field must be base64 encoded. If the "admin_id" field is specified it will be used, if not the default ID
"0" will be used.</p>
<p>Response will be something like the following:</p>
<pre><code>{
    "&lt;user id&gt;": {
        "status": "OK"
    },
    "&lt;user id&gt;": {
        "status": "FAIL",
        "message": "no such user"
    },
    "&lt;user id&gt;" {
        "status": "OK"
    }
}
</code></pre>
<h2 id="get-roles">GET /roles</h2>
<p>Request contains a list of user IDs, e.g.:</p>
<pre><code>{
    "users": [
        "124352",
        "5678"
    ]
}
</code></pre>
<p>Response would be something similar to the following:</p>
<pre><code>{
    "data": {
        "124352": {
            "room": {
                "1aa3f5f5-ba46-4aca-999a-978c7f2237c7": [
                    "moderator"
                ],
                "bb0ea500-cd94-11e6-b178-8323deb605bf": [
                    "owner"
                ]
            },
            "channel": {
                "dedf878e-b25d-4713-8058-20c6f0547c59": [
                    "admin", 
                    "owner"
                ]
            },
            "global": [
                "superuser",
                "globalmod"
            ]
        },
        "5678": {
            "room": {},
            "channel": {},
            "global": []
        }
    },
    "status_code": 200
}
</code></pre>
<p>Possible roles are:</p>
<ul>
<li>global superuser (superuser)</li>
<li>global moderator (globalmod)</li>
<li>channel owner (owner)</li>
<li>channel admin (admin)</li>
<li>room owner (owner)</li>
<li>room moderator (moderator)</li>
</ul>
<p>The only difference between global superusers and global moderators is that global superusers can also remove static 
rooms.</p>
<h2 id="get-rooms-for-users">GET /rooms-for-users</h2>
<p>Request contains a list of user IDs, e.g.:</p>
<pre><code>{
    "users": [
        "1234",
        "5678"
    ]
}
</code></pre>
<p>Response would be all rooms each user is currently in (room names and channel names are base64 encoded):</p>
<pre><code>{
    "1234": [{
        "room_id": "efeca2fe-ba93-11e6-bc9a-4f6f56293063",
        "room_name": "b2gsIHNvIHlvdSBhY3R1YWxseSBjaGVja2VkIHdoYXQgaXMgd2FzPw==",
        "channel_id": "fb843140-ba93-11e6-b178-97f0297a6d4d",
        "channel_name": "dG9tIGlzIGEgZnJlbmNoIG1hZG1hbg=="
    }],
    "5678": [{
        "room_id": "ca1dc3b4-ba93-11e6-b835-7f1d961023a1",
        "room_name": "cmVhZCB1cCBvbiBoeXBlcmxvZ2xvZysr",
        "channel_id": "f621fcaa-ba93-11e6-8590-bfe35ff80c03",
        "channel_name": "YSByZWRidWxsIGEgZGF5IGtlZXBzIHRoZSBzYW5kbWFuIGF3YXk="
    }]
}
</code></pre>
<h2 id="post-delete-messages">POST /delete-messages</h2>
<p>Used to delete ALL messages for a specific user ID.</p>
<p>Request body looks like this:</p>
<pre><code>{
    "id": "&lt;user ID&gt;"
}
</code></pre>
<p>Example response:</p>
<pre><code>{
    "status_code": 200, 
    "data": {
        "success": 4, 
        "failed": 0,
        "total": 4
    }
}
</code></pre>
<p>Or if other kinds of failures:</p>
<pre><code>{
    "status_code": 500, 
    "data": "&lt;error message, e.g. 'no id parameter in request'&gt;"
}
</code></pre>
<h2 id="get-banned">GET /banned</h2>
<p>No data required in request.</p>
<p>Response is all banned users, separated by channel, room and globally. Example response:</p>
<pre><code class="json">    {
        &quot;channels&quot;: {},
        &quot;global&quot;: {
            &quot;185626&quot;: {
                &quot;name&quot;: &quot;bHVlbA==&quot;,
                &quot;duration&quot;: &quot;1h&quot;,
                &quot;timestamp&quot;: &quot;2016-12-05T03:50:24Z&quot;
            }
        },
        &quot;rooms&quot;: {
            &quot;1aa3f5f5-ba46-4aca-999a-978c7f2237c7&quot;: {
                &quot;name&quot;: &quot;Y29vbCBndXlz&quot;,
                &quot;users&quot;: {
                    &quot;101108&quot;: {
                        &quot;name&quot;: &quot;bHVlbA==&quot;,
                        &quot;duration&quot;: &quot;30m&quot;,
                        &quot;timestamp&quot;: &quot;2016-12-05T03:20:24Z&quot;
                    }
                }
            }
        }
    }
</code></pre>

<p>The "timestamp" in the response is the UTC timestamp for when the ban will expire. Names or channels, rooms and users
are all base64 encoded. The dictionary keys for "rooms" are the UUIDs of the rooms, same for channels, while for users
it's their user IDs as keys. The bans for "global" have no separation by room/channel IDs, and no "name" or "users" 
keys.</p>
<h2 id="post-status">POST /status</h2>
<p>Set the online status or visibility status of a user.</p>
<p>Request contains:</p>
<pre><code class="json">{   
    &quot;id&quot;: &quot;&lt;user ID&gt;&quot;,
    &quot;status&quot;: &quot;&lt;one of online/offline/invisible/visible&gt;&quot;
}   
</code></pre>

<p>Example response:</p>
<pre><code class="json">{
    &quot;status_code&quot;: 200
}
</code></pre>

<h2 id="post-send">POST /send</h2>
<p>Request contains:</p>
<pre><code class="json">{   
    &quot;id&quot;: &quot;&lt;user ID&gt;&quot;,
    &quot;user_name&quot;: &quot;&lt;username, in base64&gt;&quot;,
    &quot;object_type&quot;: &quot;&lt;room/private&gt;&quot;,
    &quot;target_id&quot;: &quot;&lt;user ID to send to or UUID of room to send to&gt;&quot;,
    &quot;target_name&quot;: &quot;&lt;the name of the user/room to send to, in base64&gt;&quot;,
    &quot;content&quot;: &quot;&lt;the body to send, in base64&gt;&quot;
}   
</code></pre>

<p>Example response:</p>
<pre><code class="json">{
    &quot;status_code&quot;: 200
}
</code></pre>

<p>User/room will get something similar to this in a <code>message</code> event:</p>
<pre><code class="json">{
    &quot;id&quot;: &quot;1d805e18-a773-11e8-a65f-8b33c55c9e1b&quot;,
    &quot;published&quot;: &quot;2017-01-26T04:58:31Z&quot;,
    &quot;actor&quot;: {
        &quot;id&quot;: &quot;&lt;user ID&gt;&quot;,
        &quot;displayName&quot;: &quot;&lt;username, in base64&gt;&quot;
    },
    &quot;verb&quot;: &quot;send&quot;,
    &quot;target&quot;: {
        &quot;objectType&quot;: &quot;&lt;room/private&gt;&quot;,
        &quot;id&quot;: &quot;&lt;user ID to send to or UUID of room to send to&gt;&quot;,
        &quot;displayName&quot;: &quot;&lt;the name of the user/room to send to, in base64&gt;&quot;
    },
    &quot;object&quot;: {
        &quot;content&quot;: &quot;&lt;the body to send, in base64&gt;&quot;
    }
}
</code></pre>

<h2 id="user-id-parameter">User ID parameter</h2>
<p>The <code>/banned</code> endpoint supports having a json with user ID's in the request body to only get bans for those users. E.g.:</p>
<pre><code>curl localhost:5400/banned -d '{"users":["110464"]}' -X GET -H "Content-Type: application/json"
</code></pre>
<p>Response would be (slightly different from above example without request body):</p>
<pre><code>{
    "data": {
        "110464": {
            "channel": {},
            "room": {
                "1aa3f5f5-ba46-4aca-999a-978c7f2237c7": {
                    "name": "Y29vbCBndXlz",
                    "duration": "15m",
                    "timestamp": "2016-12-14T09:23:00Z"
                },
                "675eb2a5-17c6-45e4-bc0f-674241573f22": {
                    "name": "YmFkIGtpZHo=",
                    "duration": "2m",
                    "timestamp": "2016-12-14T09:15:51Z"
                }
            },
            "global": {}
        }
    },
    "status_code": 200
}
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../wio/" class="btn btn-neutral float-right" title="Who Is Online?">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../acl/" class="btn btn-neutral" title="ACL"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../acl/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../wio/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/require.js"></script>
      <script src="../../search/search.js"></script>

</body>
</html>
