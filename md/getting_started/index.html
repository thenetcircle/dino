<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Getting Started - Dino</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Getting Started";
    var mkdocs_page_input_path = "md/getting_started.md";
    var mkdocs_page_url = "/md/getting_started/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Dino</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../installation/">Installation</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Getting Started</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#encoding">Encoding</a></li>
                
            
                <li class="toctree-l3"><a href="#authentication">Authentication</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../api/">API</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../events/">Events</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../external_events/">External Events</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../rest/">REST API</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../wio/">Who Is Online?</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Dino</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>Getting Started</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>This example is using JavaScript.</p>
<p>First we connect to the server:</p>
<pre><code>socket = io.connect(
    'http://' + document.domain + ':' + location.port + '/chat', 
    {transports:['websocket']}
);
</code></pre>
<p>We'll receive a "connect" event back after successfully connecting. Now we have to send the "login" event to provide the
server with some extra user information and to do authentication:</p>
<pre><code>socket.on('connect', function() {
    socket.emit('login', {
        verb: 'login',
        actor: {
            id: '&lt;user ID&gt;',
            attachments: [
                {
                    objectType: 'token',
                    content: '&lt;auth token&gt;'
                }
            ]
        }
    });
});
</code></pre>
<p>All events sent to the server will get a response with the same name plus a prefix of "gn_". For example, the login 
event sent above will get the following response, "gn_login", meaning we've successfully authenticated with the server.
Now we can start joining rooms, chatting, sending events etc.</p>
<pre><code>socket.on('gn_login', function(response) {
    socket.emit('list_channels', {
        verb: 'list'
    });
});
</code></pre>
<p>The response from the server will be in JSON format. If no data is expected for the events, only a status code will be
in the response. For example, sending the "join" event to join a room won't return any data, but only the following
(if successful):</p>
<pre><code>{
    "status_code": 200
}
</code></pre>
<p>Failure to execute an event on the server will return code 400:</p>
<pre><code>{
    "status_code": 400,
    "data": "&lt;an error message, always a string&gt;"
}
</code></pre>
<p>If an internal server error occurs, code 500 is returned:</p>
<pre><code>{
    "status_code": 500,
    "data": "&lt;an error message, always a string&gt;"
}
</code></pre>
<p>For events that contains data in the response, for example when sending the event "list_channels", we expect to get a list
of channels in the response. For these events the data part is always a JSON in the ActivityStreams 1.0 format:</p>
<pre><code>{
    "status_code": 400,
    "data": {       
        "object": {
            "objectType": "channels"
            "attachments": [
                {
                    "id": "&lt;channel ID 1&gt;",
                    "content": "&lt;channel name 1 in base64&gt;"
                },
                {
                    "id": "&lt;channel ID 2&gt;",
                    "content": "&lt;channel name 2 in base64&gt;"
                },
                {
                    "id": "&lt;channel ID 3&gt;",
                    "content": "&lt;channel name 3 in base64&gt;"
                }
            ]
        },
        "verb": "list"
    }
}
</code></pre>
<h2 id="encoding">Encoding</h2>
<p>All user names, room names, channel names and chat messages are expected to be base64 encoded unicode strings. All
responses and events originating from the server will also follow this practice, so when listing rooms/channels/users
all names will always be in base64.</p>
<h2 id="authentication">Authentication</h2>
<p>If the <code>redis</code> authentication method is configured, then when clients send the <code>login</code> event to the server, the
supplied <code>token</code> and <code>actor.id</code> parameter must already exist in Redis. When the server gets the login event it will
check if the token matches the one stored in Redis for this user ID, otherwise it will not authenticate the session.</p>
<p>Therefor, before a client can login, these two values (and any other possible values used for permissions) needs to
first be set in the Redis <code>hset</code> with key <code>user:auth:&lt;user ID&gt;</code>.</p>
<p>Example:</p>
<pre><code>$ redis-cli
127.0.0.1:6379&gt; hset user:auth:1234 token 302fe6be-a72f-11e6-b5fc-330653beb4be
127.0.0.1:6379&gt; hset user:auth:1234 age 35
127.0.0.1:6379&gt; hset user:auth:1234 gender m
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../api/" class="btn btn-neutral float-right" title="API">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../installation/" class="btn btn-neutral" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../installation/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../api/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../js/theme.js"></script>

</body>
</html>
