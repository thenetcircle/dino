<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>API - Dino</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "API";
        var mkdocs_page_input_path = "md\\api.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Dino
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../getting_started/">Getting Started</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../invisibility/">Invisibility</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../usage/">Usage</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">API</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#error-codes">Error Codes</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#connect">connect</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#login">login</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#invisible-login">Invisible login</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#list_channels">list_channels</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#received">received</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#msg_status">msg_status</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#read">read</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#list_rooms">list_rooms</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#update_user_info">update_user_info</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#request_admin">request_admin</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#leave">leave</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#users_in_room">users_in_room</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#history">history</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#status">status</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#get_acl">get_acl</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#set_acl">set_acl</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#create">create</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#invite">invite</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#delete">delete</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#kick">kick</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#ban">ban</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#message">message</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#if-the-user-is-muted">If the user is muted</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#remove_room">remove_room</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#report">report</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#join">join</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#rename_room">rename_room</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../web/">Web UI API</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../events/">Events</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../external_events/">External Events</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../acl/">ACL</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../rest/">REST</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../wio/">Who Is Online?</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../storage/">Storage</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Dino</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li class="breadcrumb-item active">API</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="websocket-api">Websocket API</h1>
<h2 id="error-codes">Error Codes</h2>
<pre><code class="language-ini">OK = 200
UNKNOWN_ERROR = 250

MISSING_ACTOR_ID = 500
MISSING_OBJECT_ID = 501
MISSING_TARGET_ID = 502
MISSING_OBJECT_URL = 503
MISSING_TARGET_DISPLAY_NAME = 504
MISSING_ACTOR_URL = 505
MISSING_OBJECT_CONTENT = 506
MISSING_OBJECT = 507
MISSING_OBJECT_ATTACHMENTS = 508
MISSING_ATTACHMENT_TYPE = 509
MISSING_ATTACHMENT_CONTENT = 510
MISSING_VERB = 511

INVALID_TARGET_TYPE = 600
INVALID_ACL_TYPE = 601
INVALID_ACL_ACTION = 602
INVALID_ACL_VALUE = 603
INVALID_STATUS = 604
INVALID_OBJECT_TYPE = 605
INVALID_BAN_DURATION = 606
INVALID_VERB = 607

EMPTY_MESSAGE = 700
NOT_BASE64 = 701
USER_NOT_IN_ROOM = 702
USER_IS_BANNED = 703
ROOM_ALREADY_EXISTS = 704
NOT_ALLOWED = 705
VALIDATION_ERROR = 706
ROOM_FULL = 707
NOT_ONLINE = 708
TOO_MANY_PRIVATE_ROOMS = 709
ROOM_NAME_TOO_LONG = 710
ROOM_NAME_TOO_SHORT = 711
INVALID_TOKEN = 712
INVALID_LOGIN = 713
MSG_TOO_LONG = 714
MULTIPLE_ROOMS_WITH_NAME = 715
TOO_MANY_ATTACHMENTS = 716
NOT_ENABLED = 717
ROOM_NAME_RESTRICTED = 718
USER_MUTED = 719

NOT_ALLOWED_TO_WHISPER_CHANNEL = 720
NOT_ALLOWED_TO_WHISPER_NOT_A_CONTACT = 721
NOT_ALLOWED_TO_WHISPER_TURNED_OFF = 722
NOT_ALLOWED_TO_WHISPER_SELF = 723
NOT_ALLOWED_TO_WHISPER_GENERIC_ERROR = 724
REMOTE_ERROR = 725

NO_SUCH_USER = 800
NO_SUCH_CHANNEL = 801
NO_SUCH_ROOM = 802
NO_ADMIN_ROOM_FOUND = 803
NO_USER_IN_SESSION = 804
NO_ADMIN_ONLINE = 805
</code></pre>
<h2 id="connect"><code>connect</code></h2>
<p>Responds with event name <code>gn_connect</code>.</p>
<p>Request contains no data.</p>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200
}
</code></pre>
<h2 id="login"><code>login</code></h2>
<p>Responds with event name <code>gn_login</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;verb&quot;: &quot;login&quot;,
    &quot;actor&quot;: {
        &quot;id&quot;: &quot;&lt;user ID&gt;&quot;,
        &quot;displayName&quot;: &quot;&lt;user name&gt;&quot;,
        &quot;attachments&quot;: [
            {
                &quot;objectType&quot;: &quot;token&quot;,
                &quot;content&quot;: &quot;&lt;user token&gt;&quot;
            }
        ]
    }
}
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200,
    &quot;data&quot;: {
        &quot;id&quot;: &quot;&lt;server-generated UUID&gt;&quot;,
        &quot;published&quot;: &quot;&lt;server-generated timestamp, RFC3339 format&gt;&quot;,
        &quot;actor&quot;: {
            &quot;id&quot;: &quot;&lt;user id&gt;&quot;,
            &quot;displayName&quot;: &quot;&lt;user name in base64&gt;&quot;,
            &quot;attachments&quot;: [
                {
                    &quot;objectType&quot;: &quot;room_role&quot;,
                    &quot;id&quot;: &quot;&lt;room UUID&gt;&quot;,
                    &quot;content&quot;: &quot;moderator,owner&quot;
                },
                {
                    &quot;objectType&quot;: &quot;room_role&quot;,
                    &quot;id&quot;: &quot;&lt;room UUID&gt;&quot;,
                    &quot;content&quot;: &quot;owner&quot;
                },
                {
                    &quot;objectType&quot;: &quot;channel_role&quot;,
                    &quot;id&quot;: &quot;&lt;channel UUID&gt;&quot;,
                    &quot;content&quot;: &quot;admin,owner&quot;
                },
                {
                    &quot;objectType&quot;: &quot;global_roles&quot;,
                    &quot;content&quot;: &quot;superuser,globalmod&quot;
                }
            ]
        },
        &quot;object&quot;: {
            &quot;objectType&quot;: &quot;history&quot;,
            &quot;attachments&quot;: [{
                &quot;author&quot;: {
                    &quot;id&quot;: &quot;&lt;sender id&gt;&quot;, 
                    &quot;displayName&quot;: &quot;&lt;sender name in base64&gt;&quot;
                },
                &quot;content&quot;: &quot;&lt;message in base64&gt;&quot;,
                &quot;id&quot;: &quot;84421980-d84a-4f6f-9ad7-0357d15d99f8&quot;,
                &quot;published&quot;: &quot;2017-11-17T07:19:12Z&quot;,
                &quot;summary&quot;: &quot;9fa5b40a-f0a6-44ea-93c1-acf2947e5f09&quot;,
                &quot;objectType&quot;: &quot;history&quot;
            }]
        },
        &quot;verb&quot;: &quot;login&quot;
    }
}
</code></pre>
<p>The object attachments are non-acked messages sent to any <code>private</code> <code>room</code>s (i.e. conversation based private 
messaging). The <code>object.attachments[0].id</code> is the message UUID, while the <code>object.attachments[0].summary</code> is the 
room UUID. Multiple attachments will be listed if more than one un-acked message was found during login.</p>
<p>For the user roles, there will be an ID on the attached object if the role is for a channel or for a room. If it's a
global role there will be no ID on the object. Roles are comma separated if more than one role for a 
room/channel/global.</p>
<p>Possible roles are:</p>
<ul>
<li>global superuser (globalmod)</li>
<li>channel owner (owner)</li>
<li>channel admin (admin)</li>
<li>room owner (owner)</li>
<li>room moderator (moderator)</li>
</ul>
<p>The only difference between global moderator and super user is that the global moderators can't remove static rooms 
(ephemeral set to <code>false</code> in room list).</p>
<h3 id="invisible-login">Invisible login</h3>
<p>See <a href="../invisibility/">Invisibility</a> docs.</p>
<h2 id="list_channels"><code>list_channels</code></h2>
<p>Responds with event name <code>gn_list_channels</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;verb&quot;: &quot;list&quot;
}
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200,
    &quot;data&quot;: {
        &quot;object&quot;: {
            &quot;objectType&quot;: &quot;channels&quot;,
            &quot;attachments&quot;: [
                {
                    &quot;id&quot;: &quot;&lt;channel UUID&gt;&quot;,
                    &quot;displayName&quot;: &quot;&lt;channel name&gt;&quot;,
                    &quot;url&quot;: 8,
                    &quot;content&quot;: &quot;normal,another-tag&quot;,
                    &quot;objectType&quot;: &quot;static&quot;,
                    &quot;attachments&quot;: [
                        {
                            &quot;summary&quot;: &quot;message&quot;,
                            &quot;objectType&quot;: &quot;membership&quot;,
                            &quot;content&quot;: &quot;1&quot;
                        }
                    ]
                },
                {
                    &quot;id&quot;: &quot;&lt;channel UUID&gt;&quot;,
                    &quot;displayName&quot;: &quot;&lt;channel name&gt;&quot;,
                    &quot;url&quot;: 20,
                    &quot;content&quot;: &quot;another-tag&quot;,
                    &quot;objectType&quot;: &quot;temporary&quot;,
                    &quot;attachments&quot;: [
                        {
                            &quot;summary&quot;: &quot;join&quot;,
                            &quot;objectType&quot;: &quot;gender&quot;,
                            &quot;content&quot;: &quot;f&quot;
                        }
                    ]
                }
            ]
        },
        &quot;verb&quot;: &quot;list&quot;
    }
}
</code></pre>
<p>Each channel has a <code>url</code> field, which is the sort order defined in the admin interface, in ascending order (lower <code>url</code>
means higher up in the list).</p>
<p>The <code>objectType</code> of a channel tells you if this channel only contains static rooms, only temporary rooms or a mix of 
both. Possible values are thus:</p>
<ul>
<li>temporary</li>
<li>static</li>
<li>mix</li>
</ul>
<p>If the channel has 0 rooms in it, the objectType will be <code>mix</code>.</p>
<p>The <code>content</code> field on each attachment specifies a comma separated list of tags for the channel.</p>
<p>Attachments for each channel describes the ACLs for that channel.</p>
<h2 id="received"><code>received</code></h2>
<p>Acknowledge that one or more messages has been received. The status will change from <code>sent</code> to <code>delivered</code>.</p>
<p>Does not emit a response, only invokes the callback with the <code>status_code</code> and potentially and <code>error_message</code>. Note 
that if multiple messages are being acknowledged at the same time, they all have to be for the same room (<code>target.id</code>).</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;verb&quot;: &quot;receive&quot;,
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;uuid of the room the messages are all in&gt;&quot;
    },
    &quot;object&quot;: {
        &quot;attachments&quot;: [
            {&quot;id&quot;: &quot;&lt;message1 uuid&gt;&quot;},
            {&quot;id&quot;: &quot;&lt;message2 uuid&gt;&quot;},
            {&quot;id&quot;: &quot;&lt;message3 uuid&gt;&quot;}
        ]
    }
}
</code></pre>
<h2 id="msg_status"><code>msg_status</code></h2>
<p>Check ack status of a set of messages sent to a single user. Request:</p>
<pre><code class="language-json">{
    &quot;verb&quot;: &quot;check&quot;,
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;uuid of the user to check ack status for&gt;&quot; 
    },
    &quot;object&quot;: {
        &quot;attachments&quot;: [
            {&quot;id&quot;: &quot;&lt;message1 uuid&gt;&quot;},
            {&quot;id&quot;: &quot;&lt;message2 uuid&gt;&quot;},
            {&quot;id&quot;: &quot;&lt;message3 uuid&gt;&quot;}
        ]
    }
}
</code></pre>
<p>If message guarantee is not enabled on the server the <code>717</code> (<code>NOT_ENABLED</code>) error code will be retured as part of the 
callback, and no <code>gn_msg_status</code> event will be sent back.</p>
<p>Response will be sent as the <code>gn_msg_status</code> event with the following content:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200,
    &quot;data&quot;: {
        &quot;object&quot;: {
            &quot;objectType&quot;: &quot;statuses&quot;,
            &quot;attachments&quot;: [
                {
                    &quot;id&quot;: &quot;&lt;msg UUID 1&gt;&quot;,
                    &quot;content&quot;: &quot;&lt;ack status 1&gt;&quot;
                },
                {
                    &quot;id&quot;: &quot;&lt;msg UUID 2&gt;&quot;,
                    &quot;content&quot;: &quot;&lt;ack status 2&gt;&quot;
                },
                {
                    &quot;id&quot;: &quot;&lt;msg UUID 3&gt;&quot;,
                    &quot;content&quot;: &quot;&lt;ack status 3&gt;&quot;
                }
            ]
        },
        &quot;target&quot;: {
            &quot;id&quot;: &quot;&lt;user ID the ack status are for&gt;&quot;
        },
        &quot;verb&quot;: &quot;check&quot;,
        &quot;id&quot;: &quot;&lt;server-generated UUID&gt;&quot;,
        &quot;published&quot;: &quot;&lt;server-generated timestamp, RFC3339 format&gt;&quot;
    }
}
</code></pre>
<p>The ack statuses are:</p>
<ul>
<li>0: not acknowledged (receiver has not acked it yet)</li>
<li>1: received</li>
<li>2: read</li>
</ul>
<h2 id="read"><code>read</code></h2>
<p>Acknowledge that one or more messages has been read. The status will change from <code>sent</code>/<code>delivered</code> to <code>read</code>.</p>
<p>Does not emit a response, only invokes the callback with the <code>status_code</code> and potentially and <code>error_message</code>. Note 
that if multiple messages are being acknowledged at the same time, they all have to be for the same room (<code>target.id</code>).</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;verb&quot;: &quot;read&quot;,
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;uuid of the room the messages are all in&gt;&quot; 
    },   
    &quot;object&quot;: {
        &quot;attachments&quot;: [
            {&quot;id&quot;: &quot;&lt;message1 uuid&gt;&quot;},
            {&quot;id&quot;: &quot;&lt;message2 uuid&gt;&quot;},
            {&quot;id&quot;: &quot;&lt;message3 uuid&gt;&quot;}
        ]    
    }    
}
</code></pre>
<p>If the <code>target.id</code> is specified, the request will be relayed to online users in that room. E.g., user A sends 
message X to the room, user B then sends a <code>read</code> event after receiving it; this <code>read</code> event will then be sent 
to user A with the event name <a href="../events/#message-read"><code>gn_message_read</code></a>.</p>
<h2 id="list_rooms"><code>list_rooms</code></h2>
<p>Get a list of all rooms for a channel.</p>
<p>Responds with event name <code>gn_list_rooms</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;object&quot;: {
        &quot;url&quot;: &quot;&lt;channel UUID&gt;&quot;
    },
    &quot;verb&quot;: &quot;list&quot;
}
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200,
    &quot;data&quot;: {
        &quot;object&quot;: {
            &quot;objectType&quot;: &quot;rooms&quot;,
            &quot;url&quot;: &quot;&lt;channel UUID&gt;&quot;,
            &quot;attachments&quot;: [
                {
                    &quot;id&quot;: &quot;&lt;room UUID&gt;&quot;,
                    &quot;displayName&quot;: &quot;&lt;room name&gt;&quot;,
                    &quot;url&quot;: 8,
                    &quot;summary&quot;: &lt;number of users in this room (integer)&gt;,
                    &quot;objectType&quot;: &quot;static&quot;,
                    &quot;content&quot;: &quot;moderator,owner&quot;,
                    &quot;attachments&quot;: [
                        {
                            &quot;summary&quot;: &quot;join&quot;,
                            &quot;objectType&quot;: &quot;gender&quot;,
                            &quot;content&quot;: &quot;f&quot;
                        }
                    ]
                },
                {
                    &quot;id&quot;: &quot;&lt;room UUID&gt;&quot;,
                    &quot;displayName&quot;: &quot;&lt;room name&gt;&quot;,
                    &quot;url&quot;: 20,
                    &quot;summary&quot;: &lt;number of users in this room (integer)&gt;,
                    &quot;objectType&quot;: &quot;temporary&quot;,
                    &quot;content&quot;: &quot;&quot;,
                    &quot;attachments&quot;: [
                        {
                            &quot;summary&quot;: &quot;join&quot;,
                            &quot;objectType&quot;: &quot;gender&quot;,
                            &quot;content&quot;: &quot;f&quot;
                        }
                    ]
                }
            ]
        },
        &quot;verb&quot;: &quot;list&quot;
    }
}
</code></pre>
<p>The <code>url</code> field for <code>object</code> is the <code>UUID</code> of the channel that these rooms are for.  </p>
<p>Each room has a <code>url</code> field, which is the sort order defined in the admin interface, in ascending order (lower <code>url</code>
means higher up in the list).</p>
<p>The <code>content</code> field on the attachments describe what kind of role you have for that room. If no roles are set then
content will be empty, otherwise it will be a comma separated list of roles. Possible roles for rooms are:</p>
<ul>
<li>moderator</li>
<li>owner</li>
<li>globalmod</li>
<li>superuser</li>
</ul>
<p>Global roles and roles for channels are returned in the <code>gn_login</code> event.</p>
<p>Attachments for each room describes the ACLs for that room.</p>
<p>The <code>objectType</code> for each room describes if the room is static or temporary. Static rooms are not removed automatically
when empty, while temporary rooms are removed when the owner leaves (usually only for user created rooms).</p>
<h2 id="update_user_info"><code>update_user_info</code></h2>
<p>If a user e.g. changes his/her avatar, the change can be broadcasted to users in the same rooms as this user is in. To
e.g. let other users know this user is currently streaming video, the <code>objectType</code> <code>is_streaming</code> might be used:</p>
<pre><code class="language-json">{
    &quot;object&quot;: {
        &quot;attachments&quot;: [
            {
                &quot;content&quot;: &quot;MA==&quot;,
                &quot;objectType&quot;: &quot;is_streaming&quot;
            }
        ],
        &quot;objectType&quot;: &quot;userInfo&quot;
    },
    &quot;verb&quot;: &quot;update&quot;,
    &quot;id&quot;: &quot;&lt;server-generated UUID&gt;&quot;,
    &quot;published&quot;: &quot;&lt;server-generated timestamp, RFC3339 format&gt;&quot;
}
</code></pre>
<p>The <code>content</code> of the attachments needs to be base64 encoded.</p>
<p>Updates are saved in redis and thus will be included in the user info returned in <a href="./#join"><code>gn_join</code></a> and 
<a href="./#join"><code>gn_users_in_room</code></a>.</p>
<p>Responds with event name <code>gn_update_user_info</code>. When the update is sent to other users it will be received as an event
with name <a href="../events/#user-info-updated"><code>gn_user_info_updated</code></a>.</p>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200
}
</code></pre>
<p>Or if missing data, e.g.:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 509,
    &quot;message&quot;: &quot;no objectType on attachment for object&quot;
}
</code></pre>
<h2 id="request_admin"><code>request_admin</code></h2>
<p>When help is wanted in a room, a user can request for an admin to join and help out. Every channel has an Admin room,
which only admins can see when listing rooms and only admins can join. When a <code>request_admin</code> event is sent to the server
it will be delivered to the admin room for that channel and the admins in that room can decide what to do.</p>
<p>Important:</p>
<ul>
<li>If no user with the global role <code>superuser</code> or <code>globalmod</code> is online, the 805 code will be returned ("no admin is 
online").</li>
</ul>
<p>Responds with event name <code>gn_request_admin</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;room UUID to request help for&gt;&quot;
    },
    &quot;object&quot;: {
        &quot;content&quot;: &quot;&lt;base64 encoded message that will be delivered to the admin room&gt;&quot;
    },
    &quot;verb&quot;: &quot;help&quot;
}
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200
}
</code></pre>
<p>If no admin is online, the response will be:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 805,
    &quot;message&quot;: &quot;no admin is online&quot;
}
</code></pre>
<p>The <code>object.content</code> could be anything, e.g. a base64 encoded json message with link to backend, extra information, a 
reason text etc. </p>
<p>The event generated to be sent to the admin room is called <code>gn_admin_requested</code> (see 
<a href="../events/#admin-presence-requested">Events</a> for more information).</p>
<h2 id="leave"><code>leave</code></h2>
<p>Leave a room.</p>
<p>Responds with event name <code>gn_leave</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;room UUID&gt;&quot;
    },
    &quot;verb&quot;: &quot;leave&quot;
}
</code></pre>
<p>Or, if you want to leave a room based on the room name:</p>
<pre><code class="language-json">{
    &quot;verb&quot;: &quot;join&quot;,
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;room name&gt;&quot;,
        &quot;objectType&quot;: &quot;name&quot;
    }
}
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200
}
</code></pre>
<h2 id="users_in_room"><code>users_in_room</code></h2>
<p>List all users in a room.</p>
<p>Responds with event name <code>gn_users_in_room</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;room UUID&gt;&quot;
    },
    &quot;verb&quot;: &quot;list&quot;
}
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200,
    &quot;data&quot;: {
        &quot;object&quot;: {
            &quot;objectType&quot;: &quot;users&quot;,
            &quot;attachments&quot;: [
                {
                    &quot;id&quot;: &quot;&lt;user UUID&gt;&quot;,
                    &quot;displayName&quot;: &quot;&lt;user name&gt;&quot;,
                    &quot;content&quot;: &quot;globalmod,moderator&quot;
                    &quot;attachments&quot;: [
                        {
                            &quot;content&quot;: &quot;NDA=&quot;,
                            &quot;objectType&quot;: &quot;age&quot;
                        },
                        {
                            &quot;content&quot;: &quot;aHR0cDovL3NvbWUtdXJsLnRsZC9mb28uanBn&quot;,
                            &quot;objectType&quot;: &quot;avatar&quot;
                        }
                    ]
                },
                {
                    &quot;id&quot;: &quot;&lt;user UUID&gt;&quot;,
                    &quot;displayName&quot;: &quot;&lt;user name&gt;&quot;,
                    &quot;content&quot;: &quot;moderator&quot;
                    &quot;attachments&quot;: [
                        {
                            &quot;content&quot;: &quot;NDA=&quot;,
                            &quot;objectType&quot;: &quot;age&quot;
                        },
                        {
                            &quot;content&quot;: &quot;aHR0cDovL3NvbWUtdXJsLnRsZC9mb28uanBn&quot;,
                            &quot;objectType&quot;: &quot;avatar&quot;
                        }
                    ]
                }
            ]
        },
        &quot;verb&quot;: &quot;list&quot;
    }
}
</code></pre>
<p>The <code>content</code> of the user attachment describes the roles this user has in this room, plus any global roles. Examples:</p>
<ul>
<li><code>globalmod,moderator</code></li>
<li><code>moderator</code></li>
<li><code>superuser</code></li>
</ul>
<p>If no specific roles, the value will be blank.</p>
<h2 id="history"><code>history</code></h2>
<p>TODO: include user UUID as well as user name.</p>
<p>When joining a room the history will be included in the <code>gn_join</code> response event. If history is needed for a separate
reason than the <code>history</code> event can be used. Can also be used to get history for a private chat with another user, if
"target.id" is set to the user UUID instead of the room UUID.</p>
<p>Responds with event name <code>gn_history</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;room UUID&gt;&quot;
    },
    &quot;updated&quot;: &quot;&lt;last read timestamp, if configured in server will return messages since this time&gt;&quot;,
    &quot;verb&quot;: &quot;list&quot;
}
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200,
    &quot;data&quot;: {
        &quot;object&quot;: {
            &quot;objectType&quot;: &quot;messages&quot;,
            &quot;attachments&quot;: [
                {
                    &quot;author&quot;: {
                        &quot;id&quot;: &quot;&lt;the user id of the sender&gt;&quot;,
                        &quot;displayName&quot;: &quot;&lt;the user name of the sender&gt;&quot;
                    },
                    &quot;id&quot;: &quot;&lt;message ID&gt;&quot;,
                    &quot;content&quot;: &quot;&lt;the message content&gt;&quot;,
                    &quot;published&quot;: &quot;&lt;the time it was sent, RFC3339&gt;&quot;
                },
                {
                    &quot;author&quot;: {
                        &quot;id&quot;: &quot;&lt;the user id of the sender&gt;&quot;,
                        &quot;displayName&quot;: &quot;&lt;the user name of the sender&gt;&quot;
                    },
                    &quot;id&quot;: &quot;&lt;message ID&gt;&quot;,
                    &quot;content&quot;: &quot;&lt;the message content&gt;&quot;,
                    &quot;published&quot;: &quot;&lt;the time it was sent, RFC3339&gt;&quot;
                }
            ]
        },
        &quot;target&quot;: {
            &quot;id&quot;: &quot;&lt;room UUID&gt;&quot;
        },
        &quot;verb&quot;: &quot;history&quot;
    }
}
</code></pre>
<h2 id="status"><code>status</code></h2>
<p>Change the online status for this user.</p>
<p>Responds with <code>gn_status</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;verb&quot;: &quot;&lt;one of online/offline/invisible&gt;&quot;
}
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200
}
</code></pre>
<h2 id="get_acl"><code>get_acl</code></h2>
<p>Get the permissions (ACL) for a channel or room.</p>
<p>Responds with <code>gn_get_acl</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">    {
        &quot;target&quot;: {
            &quot;id&quot;: &quot;&lt;room UUID&gt;&quot;,
            &quot;objectType&quot;: &quot;&lt;room/channel&gt;&quot;
        },
        &quot;verb&quot;: &quot;get&quot;
    }
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200,
    &quot;data&quot;: {
        &quot;target&quot;: {
            &quot;id&quot;: &quot;&lt;room/channel UUID&gt;&quot;,
            &quot;objectType&quot;: &quot;&lt;room/channel&gt;&quot;
        },
        &quot;object&quot;: {
            &quot;objectType&quot;: &quot;acl&quot;,
            &quot;attachments&quot;: [
                {
                    &quot;objectType&quot;: &quot;&lt;ACL type name&gt;&quot;,
                    &quot;content&quot;: &quot;&lt;ACL value&gt;&quot;,
                    &quot;summary&quot;: &quot;&lt;API action, e.g. join/kick/etc&gt;&quot;
                },
                {
                    &quot;objectType&quot;: &quot;&lt;ACL type name&gt;&quot;,
                    &quot;content&quot;: &quot;&lt;ACL value&gt;&quot;,
                    &quot;summary&quot;: &quot;&lt;API action, e.g. join/kick/etc&gt;&quot;
                }
            ]
        },
        &quot;verb&quot;: &quot;get&quot;
    }
}
</code></pre>
<h2 id="set_acl"><code>set_acl</code></h2>
<p>Update the permissions of a room/channel. If the "content" is blank, the ACL with that type for the specified action
will be removed. Example "API actions" are "join", "create", "message", "kick". Example "permission types" are "age",
"gender", "membership".</p>
<p>Responds with <code>gn_set_acl</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;room/channel UUID&gt;&quot;,
        &quot;objectType&quot;: &quot;&lt;room/channel&gt;&quot;
    },
    &quot;object&quot;: {
        &quot;objectType&quot;: &quot;acl&quot;,
        &quot;attachments&quot;: [
            {
                &quot;objectType&quot;: &quot;&lt;ACL type name&gt;&quot;,
                &quot;content&quot;: &quot;&lt;ACL value&gt;&quot;,
                &quot;summary&quot;: &quot;&lt;API action, e.g. join/kick/etc&gt;&quot;
            },
            {
                &quot;objectType&quot;: &quot;&lt;ACL type name&gt;&quot;,
                &quot;content&quot;: &quot;&lt;ACL value&gt;&quot;,
                &quot;summary&quot;: &quot;&lt;API action, e.g. join/kick/etc&gt;&quot;
            }
        ]
    },
    &quot;verb&quot;: &quot;set&quot;
}
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200
}
</code></pre>
<h2 id="create"><code>create</code></h2>
<p>Create a new room under a channel. The sender of the event will be set as the first owner of the new room.</p>
<p>Responds with <code>gn_create</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;target&quot;: {
        &quot;displayName&quot;: &quot;&lt;name of the new room&gt;&quot;
    },
    &quot;object&quot;: {
        &quot;url&quot;: &quot;&lt;channel UUID&gt;&quot;
    },
    &quot;verb&quot;: &quot;create&quot;
}
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200,
    &quot;data&quot;: {
        &quot;target&quot;: {
            &quot;id&quot;: &quot;&lt;the generated UUID for this room&gt;&quot;,
            &quot;displayName&quot;: &quot;&lt;name of the new room&gt;&quot;,
            &quot;objectType&quot;: &quot;temporary&quot;
        },
        &quot;object&quot;: {
            &quot;url&quot;: &quot;&lt;channel UUID&gt;&quot;
        },
        &quot;verb&quot;: &quot;create&quot;
    }
}
</code></pre>
<p>If the amount of private rooms already exceed 2, the error code <code>709</code> (<code>TOO_MANY_PRIVATE_ROOMS</code>) will be returned.</p>
<p>The <code>target.objectType</code> will always be <code>temporary</code> since all rooms created using the API are user created rooms, meaning
they will be automatically removed when the owner leaves.</p>
<p>It is also possible to specify ACLs for a room while creating it, but adding <code>object.attachments</code> as in the <code>set_acl</code> 
event:</p>
<pre><code class="language-json">{
    &quot;target&quot;: {
        &quot;displayName&quot;: &quot;&lt;name of the new room&gt;&quot;
    },
    &quot;object&quot;: {
        &quot;url&quot;: &quot;&lt;channel UUID&gt;&quot;,
        &quot;objectType&quot;: &quot;acl&quot;,
        &quot;attachments&quot;: [
            {
                &quot;objectType&quot;: &quot;&lt;ACL type name&gt;&quot;,
                &quot;content&quot;: &quot;&lt;ACL value&gt;&quot;,
                &quot;summary&quot;: &quot;&lt;API action, e.g. join/kick/etc&gt;&quot;
            },
            {
                &quot;objectType&quot;: &quot;&lt;ACL type name&gt;&quot;,
                &quot;content&quot;: &quot;&lt;ACL value&gt;&quot;,
                &quot;summary&quot;: &quot;&lt;API action, e.g. join/kick/etc&gt;&quot;
            }
        ]
    },
    &quot;verb&quot;: &quot;create&quot;
}
</code></pre>
<h2 id="invite"><code>invite</code></h2>
<p>Invite another user to a room the current user is already in.</p>
<p>Responds with <code>gn_invite</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;UUID of the user to invite&gt;&quot;
    },
    &quot;actor&quot;: {
        &quot;url&quot;: &quot;&lt;the room UUID the invitation is for&gt;&quot;
    },
    &quot;verb&quot;: &quot;invite&quot;
}
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200
}
</code></pre>
<h2 id="delete"><code>delete</code></h2>
<p>Delete a message from a room (needs to be superuser, admin for channel, owner of channel, moderator of the room, owner 
of room or (configurable) sender of the message).</p>
<p>If <code>object_type</code> is set to <code>room</code> the <code>object.id</code> should be the UUID of a room. All messages in that room will then be
deleted. If <code>object_type</code> is set to anything else, or not specified at all, then <code>object.id</code> is assumed to be the UUID
of a single message.</p>
<p>Responds with <code>gn_delete</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;UUID of the room to delete from&gt;&quot;
    },
    &quot;object&quot;: {
        &quot;id&quot;: &quot;&lt;UUID of the message to delete OR the UUID of the room to clear&gt;&quot;,
        &quot;object_type&quot;: &quot;&lt;optional; if set to 'room' the object.id is assumed to be the room id&gt;&quot;
    },
    &quot;verb&quot;: &quot;delete&quot;
}
</code></pre>
<h2 id="kick"><code>kick</code></h2>
<p>Kick a user from a room.</p>
<p>Responds with <code>gn_kick</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;actor&quot;: {
        &quot;id&quot;: &quot;&lt;ID of the user who's kicking someone, leave black for admin ID&gt;&quot;
    },
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;ID of the room to kick from&gt;&quot;
    },
    &quot;object&quot;: {
        &quot;id&quot;: &quot;&lt;ID of the user to kick&gt;&quot;,
        &quot;content&quot;: &quot;&lt;optional reason field&gt;&quot;
    },
    &quot;verb&quot;: &quot;kick&quot;
}
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200
}
</code></pre>
<h2 id="ban"><code>ban</code></h2>
<p>Ban a user from a room for a given amount of time.</p>
<p>Responds with <code>gn_ban</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;actor&quot;: {
        &quot;id&quot;: &quot;&lt;ID of the user who's banning someone; leave empty for admin ID&gt;&quot;
    },
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;UUID of the room/channel to ban from&gt;&quot;,
        &quot;objectType&quot;: &quot;&lt;room/channel/global&gt;&quot;
    },
    &quot;object&quot;: {
        &quot;id&quot;: &quot;&lt;UUID of the user to ban&gt;&quot;,
        &quot;summary&quot;: &quot;&lt;ban duration, an integer suffixed with one of [d, h, m, s]&gt;&quot;,
        &quot;content&quot;: &quot;&lt;optional reason field, base64&gt;&quot;
    },
    &quot;verb&quot;: &quot;ban&quot;
}
</code></pre>
<p>If banning a used in a room, set objectType to <code>room</code> and <code>target.id</code> to the uuid of the room. If banning from a channel,
set <code>objectType</code> to <code>channel</code> and <code>target.id</code> to the uuid of the channel. If banning globally, set objectType to <code>global</code>
and skip <code>target.id</code>.</p>
<p>Summary is the duration of the ban. It's a number with a suffix d, h, m or s, meaning days, hours, minutes and seconds.
Only one suffix can be used. E.g.:</p>
<ul>
<li>5m (ban for five minutes),</li>
<li>3600s (ban for 3600 seconds, same as 1h),</li>
<li>365d (ban for one year).</li>
</ul>
<p>It's not possible to permanently ban a user, but you can set a very large duration for the same effect. The only
restriction is that the date when the ban ends (<code>utcnow()+duration</code>) must be before the year 10000 (date lib restriction).</p>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200
}
</code></pre>
<h2 id="message"><code>message</code></h2>
<p>Send a message to a <code>room</code> UUID (can be the user UUID or an actual room UUID).</p>
<p>Responds with event name <code>gn_message</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;verb&quot;: &quot;send&quot;,
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;room uuid&gt;&quot;,
        &quot;objectType&quot;: &quot;&lt;room/private&gt;&quot;
    },
    &quot;object&quot;: {
        &quot;content&quot;: &quot;&lt;the message, base64 encoded&gt;&quot;,
    }
}
</code></pre>
<p>If request is for conversation-based private messaging, use <code>objectType: 'private'</code>. In this case, the other user(s)
in this conversation (<code>owner</code>s of the <code>room</code>) will initially have a <code>NOT_ACKED</code> status for the message. If they are
online they will receive it and they can acknowledge the message. If they are offline they will receive it in <code>gn_login</code>
then they come online (all non-acked messages for rooms they are <code>owner</code> for).</p>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200,
    &quot;data&quot;: {
        &quot;id&quot;: &quot;c42ebf01-3d50-4f27-a345-4ed213be045d&quot;,
        &quot;published&quot;: &quot;2016-10-07T10:45:34Z&quot;,
        &quot;actor&quot;: {
            &quot;id&quot;: &quot;&lt;your user ID&gt;&quot;,
            &quot;displayName&quot;: &quot;&lt;your user name&gt;&quot;
        },
        &quot;verb&quot;: &quot;send&quot;,
        &quot;target&quot;: {
            &quot;id&quot;: &quot;&lt;room ID&gt;&quot;,
            &quot;displayName&quot;: &quot;&lt;room name&gt;&quot;
        },
        &quot;object&quot;: {
            &quot;content&quot;: &quot;&lt;the message&gt;&quot;,
            &quot;displayName&quot;: &quot;&lt;the channel name&gt;&quot;,
            &quot;url&quot;: &quot;&lt;the channel id&gt;&quot;,
            &quot;objectType&quot;: &quot;&lt;room/private&gt;&quot;
        }
    }
}
</code></pre>
<p>The response will send the same ActivityStreams as was in the request, with the addition of a server generated ID (uuid)
and the <code>published</code> field set to the time the server received the request (in RFC3339 format).</p>
<h3 id="if-the-user-is-muted">If the user is muted</h3>
<p>If a user is muted in a room, and tries to send a message in that room, a <code>703</code> error code will be returned, along with 
this example response (<code>object.summary</code> is the remaining seconds of the mute, and <code>object.content</code> is the reason for 
the mute (if any) in base64):</p>
<pre><code class="language-json">[
  &quot;gn_message&quot;,
  {
    &quot;status_code&quot;: 703,
    &quot;data&quot;: {
      &quot;verb&quot;: &quot;mute&quot;,
      &quot;object&quot;: {
        &quot;content&quot;: &quot;&quot;,
        &quot;summary&quot;: &quot;1608&quot;
      },
      &quot;target&quot;: {
        &quot;objectType&quot;: &quot;room&quot;,
        &quot;id&quot;: &quot;2e7d537e-bed5-47c5-a7f6-357075759e5d&quot;,
        &quot;displayName&quot;: &quot;ZGVmYXVsdA==&quot;
      },
      &quot;id&quot;: &quot;97fa6454-e93a-4379-876d-c9e45d6f9b86&quot;,
      &quot;published&quot;: &quot;2023-08-17T06:46:18Z&quot;,
      &quot;provider&quot;: {
        &quot;id&quot;: &quot;popp&quot;
      }
    }
  }
]
</code></pre>
<p>Note: a mute is automatically removed when the timer runs out, and the user can then send messages again.</p>
<h2 id="remove_room"><code>remove_room</code></h2>
<p>Response with the event name <code>gn_remove_room</code>.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;verb&quot;: &quot;remove&quot;,
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;room ID&gt;&quot;
    }
}
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200,
    &quot;data&quot;: {
        &quot;target&quot;: {
            &quot;id&quot;: &quot;&lt;room uuid&gt;&quot;,
            &quot;displayName&quot;: &quot;&lt;room name in base64&gt;&quot;,
            &quot;objectType&quot;: &quot;room&quot;
        },
        &quot;id&quot;: &quot;c42ebf01-3d50-4f27-a345-4ed213be045d&quot;,
        &quot;published&quot;: &quot;2016-10-07T10:45:34Z&quot;,
        &quot;verb&quot;: &quot;removed&quot;
    }
}
</code></pre>
<h2 id="report"><code>report</code></h2>
<p>No response.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;verb&quot;: &quot;report&quot;,
    &quot;object&quot;: {
        &quot;id&quot;: &quot;&lt;uuid of message&gt;&quot;,
        &quot;content&quot;: &quot;&lt;the actual message to report, base64&gt;&quot;,
        &quot;summary&quot;: &quot;&lt;optional reason text, base64&gt;&quot;
    },
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;user ID to report&gt;&quot;
    }
}
</code></pre>
<p>A report will be sent to both the admin room and as an external event published on the MQ.</p>
<h2 id="join"><code>join</code></h2>
<p>Responds with the event name <code>gn_join</code>.</p>
<p>In the <code>user</code> attachments, the <code>content</code> fields tells you the room roles that the user has in this room (as a comma
separated value), plus any global roles. Possible roles are:</p>
<ul>
<li>superuser,</li>
<li>globalmod,</li>
<li>owner,</li>
<li>moderator,</li>
<li>admin.</li>
</ul>
<p>Currently only the <code>superuser</code> and <code>globalmod</code> role is considered when the <code>request_admin</code> api is used.</p>
<p>Request contains:</p>
<pre><code class="language-json">{
    &quot;verb&quot;: &quot;join&quot;,
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;room ID&gt;&quot;
    }
}
</code></pre>
<p>Or, if you want to join a room based on the room name:</p>
<pre><code class="language-json">{
    &quot;verb&quot;: &quot;join&quot;,
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;room name&gt;&quot;,
        &quot;objectType&quot;: &quot;name&quot;
    }
}
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200,
    &quot;data&quot;: {
        &quot;object&quot;: {
            &quot;objectType&quot;: &quot;room&quot;,
            &quot;attachments&quot;: [{
                &quot;objectType&quot;: &quot;acl&quot;,
                &quot;attachments&quot;: []
            }, {
                &quot;objectType&quot;: &quot;history&quot;,
                &quot;attachments&quot;: [{
                    &quot;author&quot;: {
                        &quot;id&quot;: &quot;50327&quot;,
                        &quot;displayName&quot;: &quot;Zmbw==&quot;,
                        &quot;attachments&quot;: [{
                            &quot;objectType&quot;: &quot;avatar&quot;,
                            &quot;content&quot;: &quot;aHR0cDovLzAuYmlsZC5wb3BwZW4ubGFiL20QzdCOUI5XzMwMF9zcS5qcGc=&quot;
                        }, {
                            &quot;objectType&quot;: &quot;app_avatar&quot;,
                            &quot;content&quot;: &quot;aHR0cDovLzAuaW1nLnBvcGNvcm4NTAwNDMyNy1GOUI4RjBDNjBBlCOV8zMDBfc3EuanBn&quot;
                        }, {
                            &quot;objectType&quot;: &quot;app_avatar_safe&quot;,
                            &quot;content&quot;: &quot;aHR0cDovLzAuaW1nLnBvcGNvcTAwNDMyNy1GOUI4RjBDN3QjlCOV8zMDBfc3EuanBn&quot;
                        }]
                    },
                    &quot;summary&quot;: &quot;7935a673-da64-4419-818b-e6e0d1864b61&quot;,
                    &quot;id&quot;: &quot;d02598a1-6ae6-4182-8f2c-c2e66d941303&quot;,
                    &quot;content&quot;: &quot;eyJjb2xvciI6IjiwiZ2nRlOiJkc2EifQ==&quot;,
                    &quot;published&quot;: &quot;2019-07-04T07:45:59Z&quot;
                }]
            }, {
                &quot;objectType&quot;: &quot;owner&quot;,
                &quot;attachments&quot;: [{
                    &quot;id&quot;: &quot;0&quot;,
                    &quot;displayName&quot;: &quot;QWW4=&quot;
                }]
            }, {
                &quot;objectType&quot;: &quot;user&quot;,
                &quot;attachments&quot;: [{
                    &quot;id&quot;: &quot;5048&quot;,
                    &quot;displayName&quot;: &quot;am8yaw==&quot;,
                    &quot;attachments&quot;: [{
                        &quot;objectType&quot;: &quot;region&quot;,
                        &quot;content&quot;: &quot;Qmlu&quot;
                    }, {
                        &quot;objectType&quot;: &quot;avatar&quot;,
                        &quot;content&quot;: &quot;aHR0cDovLzAuYmOTgxRjhBNUM0NDA5MDQ2MDA4ODdERTJfMzAwX3NxLmpwZw==&quot;
                    }, {
                        &quot;objectType&quot;: &quot;&lt;etc. etc.&gt;&quot;,
                        &quot;content&quot;: &quot;&lt;some other content&gt;&quot;
                    }],
                    &quot;content&quot;: &quot;globalmod&quot;,
                    &quot;objectType&quot;: &quot;user&quot;
                }]
            }]
        },
        &quot;verb&quot;: &quot;join&quot;,
        &quot;target&quot;: {
            &quot;id&quot;: &quot;7935a673-da64-4419-818b-e6e0d1864b61&quot;,
            &quot;displayName&quot;: &quot;TG9k=&quot;
        },
        &quot;id&quot;: &quot;6a61c7a5-0ae0-4735-918d-18c9d137e43c&quot;,
        &quot;published&quot;: &quot;2019-07-05T06:18:30Z&quot;,
        &quot;provider&quot;: {
            &quot;id&quot;: &quot;some-name&quot;
        }
    }
}
</code></pre>
<p>Attachments for each user contains the user data, e.g. user name, age, city etc.</p>
<h2 id="rename_room"><code>rename_room</code></h2>
<p>Responds with the event name <code>gn_rename_room</code>. Every other connected user will receive a 
<a href="../events/#gn_room_renamed"><code>gn_room_renamed</code></a> event.</p>
<p>Request example:</p>
<pre><code class="language-json">{
    &quot;verb&quot;: &quot;rename&quot;,
    &quot;target&quot;: {
        &quot;id&quot;: &quot;&lt;room ID&gt;&quot;,
        &quot;displayName&quot;: &quot;&lt;NEW room name in base64&gt;&quot;,
        &quot;objectType&quot;: &quot;room&quot;
    }
}
</code></pre>
<p>Response data if successful:</p>
<pre><code class="language-json">{
    &quot;status_code&quot;: 200,
    &quot;data&quot;: {
        &quot;target&quot;: {
            &quot;id&quot;: &quot;&lt;room uuid&gt;&quot;,
            &quot;displayName&quot;: &quot;&lt;room name in base64&gt;&quot;,
            &quot;objectType&quot;: &quot;room&quot;
        },
        &quot;id&quot;: &quot;c42ebf01-3d50-4f27-a345-4ed213be045d&quot;,
        &quot;published&quot;: &quot;2016-10-07T10:45:34Z&quot;,
        &quot;verb&quot;: &quot;renamed&quot;
    }
}
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../usage/" class="btn btn-neutral float-left" title="Usage"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../web/" class="btn btn-neutral float-right" title="Web UI API">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../usage/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../web/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
